const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Dashboard-cXuXkbLi.js","assets/js/ui-vendor-CgIz45wR.js","assets/js/react-vendor-DKKOAuGG.js","assets/js/useMetrics-IzacKmZd.js","assets/js/http-vendor-B9ygI19o.js","assets/js/Network-BUyt50V-.js","assets/js/CustomTooltip-65aNhs3L.js","assets/js/charts-B4vmDJji.js","assets/js/Clients-D28C4UFD.js","assets/js/DeviceUsage-olxuZki3.js","assets/js/ConnectionDetails-DpBQVMvJ.js","assets/js/System-t87q8tF8.js","assets/js/SystemInfo-CYTvLHTA.js","assets/js/Documentation-BARXF0nT.js","assets/js/Speedtest-pIJbF-4P.js","assets/js/TrafficShaping-BAcpmeR4.js","assets/js/Apprise-BgfIPKhS.js"])))=>i.map(i=>d[i]);
import{j as e,C,A as P,L as _,T as w,B as L}from"./ui-vendor-CgIz45wR.js";import{e as R,g as A,r as a,u as D,B as O,f as N,h as l,N as E,R as T}from"./react-vendor-DKKOAuGG.js";import{a as B}from"./http-vendor-B9ygI19o.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var y={},S;function z(){if(S)return y;S=1;var s=R();return y.createRoot=s.createRoot,y.hydrateRoot=s.hydrateRoot,y}var U=z();const V=A(U),q="modulepreload",$=function(s){return"/"+s},v={},f=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){let j=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");r=j(n.map(u=>{if(u=$(u),u in v)return;v[u]=!0;const p=u.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${g}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":q,p||(x.as="script"),x.crossOrigin="",x.href=u,d&&x.setAttribute("nonce",d),document.head.appendChild(x),p)return new Promise((k,I)=>{x.addEventListener("load",k),x.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&i(d.reason);return t().catch(i)})},H="";class F{client;constructor(){this.client=B.create({baseURL:H,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(t=>{const n=localStorage.getItem("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,t=>(t.response?.status===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("username"),window.location.href="/login"),Promise.reject(t)))}async login(t){return(await this.client.post("/api/auth/login",t)).data}async logout(){await this.client.post("/api/auth/logout"),localStorage.removeItem("access_token"),localStorage.removeItem("username")}async getCurrentUser(){return(await this.client.get("/api/auth/me")).data}async getSystemHistory(t,n,o){const r={};return t&&(r.start=t.toISOString()),n&&(r.end=n.toISOString()),o&&(r.interval=o.toString()),(await this.client.get("/api/history/system",{params:r})).data}async getInterfaceHistory(t,n,o,r){const i={};return n&&(i.start=n.toISOString()),o&&(i.end=o.toISOString()),r&&(i.interval=r.toString()),(await this.client.get(`/api/history/interface/${t}`,{params:i})).data}async getBandwidthHistory(t,n="1h"){return(await this.client.get(`/api/history/bandwidth/${t}`,{params:{period:n}})).data}async healthCheck(){return(await this.client.get("/api/health")).data}async getCurrentClientBandwidth(){return(await this.client.get("/api/bandwidth/clients/current")).data}async getClientBandwidthHistory(t,n="1h",o="raw"){return(await this.client.get(`/api/bandwidth/clients/${t}`,{params:{range:n,interval:o}})).data}async getBulkClientBandwidthHistory(t="1h",n="raw"){return(await this.client.get("/api/bandwidth/clients/history/bulk",{params:{range:t,interval:n}})).data}async getCurrentInterfaceStats(){return(await this.client.get("/api/bandwidth/interfaces/current")).data}async getInterfaceTotals(t="1h"){return(await this.client.get("/api/bandwidth/interfaces/totals",{params:{range:t}})).data}async getClientConnections(t,n="1h"){return(await this.client.get(`/api/bandwidth/connections/${t}/current`,{params:{range:n}})).data}async getConnectionHistory(t,n,o,r="1h",i="raw"){return(await this.client.get(`/api/bandwidth/connections/${t}/history`,{params:{remote_ip:n,remote_port:o,range:r,interval:i}})).data}async getFastfetch(){return(await this.client.get("/api/system/fastfetch")).data}async getGitHubStats(){return(await this.client.get("/api/system/github-stats")).data}async getDocumentation(){return(await this.client.get("/api/system/documentation")).data}async getCakeStatus(){return(await this.client.get("/api/cake/status")).data}async getCurrentCakeStats(){return(await this.client.get("/api/cake/current")).data}async getAppriseStatus(){return(await this.client.get("/api/apprise/status")).data}async getAppriseServices(){return(await this.client.get("/api/apprise/services")).data}async getAppriseConfig(){return(await this.client.get("/api/apprise/config")).data}async sendAppriseNotification(t,n,o){return(await this.client.post("/api/apprise/notify",{body:t,title:n,notification_type:o})).data}async getCakeHistory(t="1h",n){const o={range:t};return n&&(o.interface=n),(await this.client.get("/api/cake/history",{params:o})).data}}const M=new F;function W(){const[s,t]=a.useState(""),[n,o]=a.useState(""),[r,i]=a.useState(""),[c,d]=a.useState(!1),j=D(),u=async p=>{p.preventDefault(),i(""),d(!0);try{const g=await M.login({username:s,password:n});localStorage.setItem("access_token",g.access_token),localStorage.setItem("username",g.username),j("/dashboard")}catch(g){i(g.response?.data?.detail||"Login failed")}finally{d(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs(C,{className:"w-full max-w-md",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"Router WebUI"}),r&&e.jsx(P,{color:"failure",className:"mb-4",children:r}),e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"username",value:"Username"}),e.jsx(w,{id:"username",type:"text",placeholder:"Enter your username",value:s,onChange:p=>t(p.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"password",value:"Password"}),e.jsx(w,{id:"password",type:"password",placeholder:"Enter your password",value:n,onChange:p=>o(p.target.value),required:!0})]}),e.jsx(L,{type:"submit",disabled:c,children:c?"Logging in...":"Sign in"})]})]})})}const G=a.lazy(()=>f(()=>import("./Dashboard-cXuXkbLi.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>({default:s.Dashboard}))),K=a.lazy(()=>f(()=>import("./Network-BUyt50V-.js"),__vite__mapDeps([5,1,2,3,6,7,4])).then(s=>({default:s.Network}))),J=a.lazy(()=>f(()=>import("./Clients-D28C4UFD.js"),__vite__mapDeps([8,1,2,3,4])).then(s=>({default:s.Clients}))),Q=a.lazy(()=>f(()=>import("./DeviceUsage-olxuZki3.js"),__vite__mapDeps([9,1,2,6,3,7,4])).then(s=>({default:s.DeviceUsage}))),b=a.lazy(()=>f(()=>import("./ConnectionDetails-DpBQVMvJ.js"),__vite__mapDeps([10,1,2,6,3,7,4])).then(s=>({default:s.ConnectionDetails}))),X=a.lazy(()=>f(()=>import("./System-t87q8tF8.js"),__vite__mapDeps([11,1,2,6,3,7,4])).then(s=>({default:s.System}))),Y=a.lazy(()=>f(()=>import("./SystemInfo-CYTvLHTA.js"),__vite__mapDeps([12,1,2,3,4])).then(s=>({default:s.SystemInfo}))),Z=a.lazy(()=>f(()=>import("./Documentation-BARXF0nT.js"),__vite__mapDeps([13,1,2,3,4])).then(s=>({default:s.Documentation}))),ee=a.lazy(()=>f(()=>import("./Speedtest-pIJbF-4P.js"),__vite__mapDeps([14,1,2,6,3,7,4])).then(s=>({default:s.Speedtest}))),te=a.lazy(()=>f(()=>import("./TrafficShaping-BAcpmeR4.js"),__vite__mapDeps([15,1,2,3,6,7,4])).then(s=>({default:s.TrafficShaping}))),se=a.lazy(()=>f(()=>import("./Apprise-BgfIPKhS.js"),__vite__mapDeps([16,1,2,3,4])).then(s=>({default:s.Apprise}))),h=()=>e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})});function m({children:s}){return localStorage.getItem("access_token")?e.jsx(e.Fragment,{children:s}):e.jsx(E,{to:"/login",replace:!0})}function ne(){return e.jsx(O,{children:e.jsxs(N,{children:[e.jsx(l,{path:"/login",element:e.jsx(W,{})}),e.jsx(l,{path:"/dashboard",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(G,{})})})}),e.jsx(l,{path:"/network",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(K,{})})})}),e.jsx(l,{path:"/devices",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(J,{})})})}),e.jsx(l,{path:"/device-usage",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(Q,{})})})}),e.jsx(l,{path:"/device-usage/:ipAddress",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(b,{sourcePage:"device-usage"})})})}),e.jsx(l,{path:"/devices/:ipAddress",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(b,{sourcePage:"devices"})})})}),e.jsx(l,{path:"/system",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(X,{})})})}),e.jsx(l,{path:"/system-info",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(Y,{})})})}),e.jsx(l,{path:"/documentation",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(Z,{})})})}),e.jsx(l,{path:"/speedtest",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(ee,{})})})}),e.jsx(l,{path:"/traffic-shaping",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(te,{})})})}),e.jsx(l,{path:"/apprise",element:e.jsx(m,{children:e.jsx(a.Suspense,{fallback:e.jsx(h,{}),children:e.jsx(se,{})})})}),e.jsx(l,{path:"/",element:e.jsx(E,{to:"/dashboard",replace:!0})})]})})}(()=>{try{const s=localStorage.getItem("theme"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=s?s==="dark":t,o=document.documentElement;n?o.classList.add("dark"):o.classList.remove("dark")}catch{}})();V.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(ne,{})}));export{M as a};
